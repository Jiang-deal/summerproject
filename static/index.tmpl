{{define "get/index.tmpl"}}
<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>数据补全界面</title>
    <link type="text/css" rel="stylesheet" href="/xxx/style.css">
    <script src="/xxx/echarts.min.js" ></script>

    <!--引入jquery.js文件 -->
    <!-- <script type="text/javascript" src="/static/script/jquery-1.7.2.js"></script> -->
    <script crossorigin="anonymous" src="https://cdn.bootcdn.net/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.form/4.2.1/jquery.form.min.js"
        integrity="sha384-tIwI8+qJdZBtYYCKwRkjxBGQVZS3gGozr3CtI+5JF/oL1JmPEHzCEnIKbDbLTCer"
        crossorigin="anonymous"></script>
</head>

<body>
    <div id="login_header">
        <img class="logo_img" alt="" src="/static/img/logo.gif">
    </div>

    <!-- <div class="login_banner" style="background-image: url(/1.jpeg);"> -->
    <div class="login_banner">
        <!-- style="background-color:pink;" -->

        <!-- <div id="l_content">
					<span class="login_word">地址判断</span>
				</div> -->

        <div id="content">
            <div class="login_form">
                <div class="login_box">
                    <div class="tit">
                        <h1>请选择文件：</h1>
                    </div><br />
                    <div class="form">

                        <form method="POST" action="http://81.68.192.244/DataSupply/upload" enctype="multipart/form-data"
                            id="btnn1" target="target">
                            <form id="btnn">
                                <input type="file" name="f1">
                                <input type="submit" id="btn" value="上传">
                            </form>
                    </div>

                    <!-- -------------折线图 -->
                    <div id="main1" style="width: 700px;height:300px;"></div>
                    <!---->

                    
                    <script type="text/javascript">
                        // var btn = document.getElementById('btnn');//绑定发送按钮
                        // dosend=function(){

                        // }
                        console.log('data');




                        var chartDom = document.getElementById('main1');
                        var myChart = echarts.init(chartDom);
                        var option1;
                        //jia

                        //获取从服务器传来的数据
                        $(function () {
                            /*
                             获取form元素，调用其ajaxForm(...)方法
                             内部的function(data)的data就是后台返回的数据
                            */
                            $("#btnn1").ajaxForm(function (data) {
                                fromserver = JSON.stringify(data)
                                console.log("hhh", data)
                                console.log(data[2].Electrict);
                                console.log("str:" + JSON.stringify(data));

                                option1 = data

                                var fromserver = JSON.stringify(data)
                                console.log("长度", data[1].Len1)

                                //标注那些点是补齐的
                                var area = new Array(data[1].Len2)
                                var i = 0
                                for (i; i < data[1].Len2; i++) {

                                    var lack = data[i].Absence//确实数据的点
                                    var sec = {
                                        gt: lack - 2,
                                        lte: lack - 1,
                                        color: 'red'
                                    }
                                    area[i] = sec

                                }
                                // var sec1 = {
                                //     lte: data[0].Absence-2,
                                //     color: 'green'
                                // }
                                // area[i] = sec1
                                // i = i + 1
                                // var sec2 = {
                                //     gt: data[data[1].Len2 - 1].Absence-1,
                                //     color: 'green'
                                // }
                                // area[i] = sec2
                                // i = i + 1

                                // for (index = 1; index < data[1].Len2 - 1; index++) {
                                //     var lack = data[index].Absence//缺失数据的点
                                //     var sec3 = {
                                //         gt: lack,
                                //         lte: lack + 1,
                                //         color: 'green'
                                //     }
                                // }

                                console.log("缺失区域", data[1].Len2)

                                console.log("缺失区域", JSON.stringify(area))



                                //声明坐标轴上的点
                                var mycars = new Array(data[1].Len1)
                                for (i = 0; i < data[1].Len1 - 1; i++) {
                                    mycars[i] = data[i + 1].Electrict
                                }
                                //mycars[0]=data[2].Electrict
                                console.log(mycars[0])
                                console.log(mycars.length)
                                option = {
                                    title: {
                                        text: '用电量分布',
                                        subtext: '纯属虚构'
                                    },
                                    //鼠标移动到坐标上会出现对应线条
                                    tooltip: {
                                        trigger: 'axis',
                                        axisPointer: {
                                            type: 'cross'
                                        }
                                    },
                                    toolbox: {
                                        show: true,//是否显示工具栏组件。feature就是一个把图标作为图片保存下来的小工具
                                        feature: {
                                            saveAsImage: {}
                                        }
                                    },
                                    xAxis: {
                                        type: 'category',
                                        boundaryGap: true,//设置横坐标的距离
                                        data: ['1', '2', '3', '4', '5', '6', '7', '8', '9', '10', '11', '12', '13', '14', '15', '16', '17', '18', '19', '20', '21', '22', '23', '24', '25', '26', '27', '28', '29', '30', '31']
                                    },
                                    yAxis: {
                                        type: 'value',
                                        //坐标轴刻度标签的相关设置。
                                        data: ['10', '20', '30', '40', '50', '60', '70']
                                        // axisLabel: {
                                        //     formatter: '{value} W'
                                        // },
                                        // axisPointer: {
                                        //     snap: true
                                        // }
                                    },
                                    visualMap: {
                                        show: false,
                                        dimension: 0,//指定用数据   的『哪个维度』
                                        pieces: area,
                                        outOfRange: {

                                            color: "green",
                                        }
                                    },
                                    series: [
                                        {
                                            name: '用电量',
                                            type: 'line',
                                            smooth: true,
                                            data: mycars,
                                            // markArea: {
                                            //     //样式
                                            //     itemStyle: {
                                            //         color: 'rgba(255, 173, 177, 0.4)'
                                            //     },
                                            //     data: [
                                            //         [
                                            //             {
                                            //         name: '早高峰',
                                            //         xAxis: '07:30'
                                            //     }, 
                                            //     {
                                            //         xAxis: '10:00'
                                            //     }
                                            // ], 
                                            // [{
                                            //         name: '晚高峰',
                                            //         xAxis: '17:30'
                                            //     }, {
                                            //         xAxis: '21:15'
                                            //     }]]
                                            // }
                                        }
                                    ]
                                };
                                // option && myChart.setOption(option);
                                if (option && typeof option === "object") {
                                    myChart.setOption(option, true);
                                }

                            })
                        })
                        //date=JSON.parse(fromserver)

                        console.log(option1, "数据移动")





                    </script>
                </div>
            </div>
        </div>
        <!-- <div id="bottom">
			<span>
				地址判断 &copy;2021
			</span>
		</div> -->
</body>

</html>
{{end}}